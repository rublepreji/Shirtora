<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Listing</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        .product-card {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 
                        0 2px 4px -2px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s;
        }
        .product-card:hover {
            transform: translateY(-2px);
        }
        .filter-section {
            min-width: 250px;
        }
        .strike-through {
            text-decoration: line-through;
        }
        .pagination-active {
            background-color: #000;
            color: #fff;
        }

        /* Mobile Sidebar Style */
        #filterSidebar.mobile-active {
            position: fixed;
            top: 0;
            left: 0;
            width: 75%;
            height: 100vh;
            background: white;
            z-index: 50;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body class="bg-white text-gray-800">

    <%- include("../../view/partials/user/header") %>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

        <!-- Header/Breadcrumbs -->
        <div class="py-6">
            <nav class="text-sm">
                <a href="#" class="text-gray-500 hover:text-black">Home</a>
                <span class="mx-2 text-gray-300">/</span>
                <span class="font-medium text-gray-800">Shirts</span>
            </nav>
        </div>

        <!-- Mobile Hamburger Button -->
        <button id="openFilterBtn"
            class="lg:hidden p-2 border rounded-md mb-4 flex items-center gap-2">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            Filters
        </button>

        <!-- Main Content -->
        <div class="flex flex-col lg:flex-row gap-8 pb-12">

            <!-- LEFT FILTER SIDEBAR -->
            <aside id="filterSidebar"
                class="hidden lg:block filter-section lg:w-1/4 xl:w-1/5 bg-white border-r border-gray-200 lg:pr-6">

                <!-- Mobile Close Button -->
                <button id="closeFilterBtn" class="lg:hidden absolute right-4 top-4 text-gray-600 text-xl">
                    ✖
                </button>

                <h2 class="text-xl font-bold mb-6">Filters</h2>

                <!-- Category Filter -->
                <div class="mb-8 border-b pb-4">
                    <h3 class="text-lg font-semibold mb-3 flex justify-between items-center">
                        Category
                        <button class="text-gray-400 hover:text-gray-600">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                            </svg>
                        </button>
                    </h3>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4" checked>
                            <span class="ml-2">Casuals</span>
                        </label>
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4">
                            <span class="ml-2">Formals</span>
                        </label>
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4">
                            <span class="ml-2">Partywear</span>
                        </label>
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4">
                            <span class="ml-2">T-Shirts</span>
                        </label>
                    </div>
                </div>

                <!-- Brand Filter -->
                <div class="mb-8 border-b pb-4">
                    <h3 class="text-lg font-semibold mb-3 flex justify-between items-center">
                        Brand
                        <button class="text-gray-400 hover:text-gray-600">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                            </svg>
                        </button>
                    </h3>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4">
                            <span class="ml-2">US Polo</span>
                        </label>
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4">
                            <span class="ml-2">Allen Solly</span>
                        </label>
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4">
                            <span class="ml-2">Louis Philippe</span>
                        </label>
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4" checked>
                            <span class="ml-2">Otto</span>
                        </label>
                    </div>
                </div>

                <!-- Price Filter -->
                <div class="mb-8 pb-4">
                    <h3 class="text-lg font-semibold mb-3 flex justify-between items-center">
                        Price
                        <button class="text-gray-400 hover:text-gray-600">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                            </svg>
                        </button>
                    </h3>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4">
                            <span class="ml-2">Price 2000 to 3000</span>
                        </label>
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4" checked>
                            <span class="ml-2">Price 3000 to 5000</span>
                        </label>
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4">
                            <span class="ml-2">Price 5000 to 10000</span>
                        </label>
                        <label class="flex items-center text-sm">
                            <input type="checkbox" class="rounded text-black h-4 w-4">
                            <span class="ml-2">Above 10000</span>
                        </label>
                    </div>
                </div>

            </aside>

            <!-- RIGHT COLUMN (Products) -->
            <main class="lg:w-3/4 xl:w-4/5">

                <!-- Sorting Bar -->
                <div class="flex items-center text-sm mb-6 border-b pb-3 overflow-x-auto whitespace-nowrap">
                    <span class="font-semibold text-gray-500 mr-4">Sort By</span>
                    <button class="px-3 py-1 mr-4 rounded-full font-bold border border-black text-xs">
                        Popularity
                    </button>
                    <button class="text-gray-500 px-3 py-1 mr-4 hover:text-black">
                        Newest First
                    </button>
                    <button class="text-gray-500 px-3 py-1 mr-4 hover:text-black">
                        Price Low - High
                    </button>
                    <button class="text-gray-500 px-3 py-1 mr-4 hover:text-black">
                        Price High - Low
                    </button>
                </div>

                <!-- Product Grid -->
                <div class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6">
                    <% product.map(data => { %>
                    <div class="product-card bg-white rounded-lg overflow-hidden shadow-md">
                    <img src="<%= data.productImage[0] %>" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-semibold text-sm mb-1 truncate"><%= data.productName %></h3>
                        <div class="text-xs text-yellow-500 mb-2">★★★★☆</div>
                        <div class="text-sm font-bold">₹<%= data.variants[0].price %></div>

                        <div class="mt-3 flex items-center gap-2">

                            <!-- Add to Cart -->
                            <button class="flex-1 border border-black py-2 rounded-md text-sm hover:bg-black hover:text-white transition">
                                Add to cart
                            </button>

                            <!-- Wishlist Button (Fixed Alignment) -->
                            <button class="w-10 h-10 border border-gray-300 rounded-md flex items-center justify-center hover:bg-gray-100">
                                <svg 
                                    class="w-5 h-5 text-gray-500 hover:text-red-500 transition" 
                                    fill="none" 
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path 
                                        stroke-linecap="round" 
                                        stroke-linejoin="round" 
                                        stroke-width="2"
                                        d="M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 21l-7.682-7.682a4.5 4.5 0 010-6.364z"
                                    />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <% }) %>
                </div>

            </main>
        </div>
    </div>

    <%- include("../../view/partials/user/footer") %>

    <!-- JS for sidebar toggle -->
    <script>
        const openBtn = document.getElementById("openFilterBtn");
        const closeBtn = document.getElementById("closeFilterBtn");
        const sidebar = document.getElementById("filterSidebar");

        openBtn?.addEventListener("click", () => {
            sidebar.classList.add("mobile-active");
            sidebar.classList.remove("hidden");
        });

        closeBtn?.addEventListener("click", () => {
            sidebar.classList.remove("mobile-active");
            sidebar.classList.add("hidden");
        });
    </script>

</body>
</html>
